/**
 * Given two different positions on a chess board, find the least number of moves it would take a knight to get from one to the other.
    The positions will be passed as two arguments in algebraic notation. For example, knight("a3", "b5") should return 1.

    The knight is not allowed to move off the board. The board is 8x8.

    For information on knight moves, see https://en.wikipedia.org/wiki/Knight_%28chess%29

    For information on algebraic notation, see https://en.wikipedia.org/wiki/Algebraic_notation_%28chess%29

    (Warning: many of the tests were generated randomly. If any do not work, the test cases will return the input, output, and expected output; please post them.)
 * 
 */

function knight(start, finish) {
  // Ha-ha, it's not "knight", it's a horse :D
  const characters = ["a", "b", "c", "d", "e", "f", "g", "h"];
  let chessboard = [];
  for (let i = 0; i < characters.length; i++) {
    chessboard[i] = chessboard[i] || [];
    for (let j = 0; j < characters.length; j++) {
      chessboard[i].push({
        key: characters[j],
        index: j,
        number: i + 1,
        name: `${characters[j]}${i + 1}`,
      });
    }
  }
  const data = {
    queue: [{ position: start, parent: null, currentPath: null }],
    visits: [
      {
        parent: null,
        path: null,
        position: start,
      },
    ],
  };
  findTheWayForTheKnight(chessboard, data, finish);
  const visits = (data.visits.filter((i) => i.position === finish)).sort((a, b) => a.path.length - b.path.length);
  return (visits[0].path.split('.')).length - 1 || 0;
}

function findTheWayForTheKnight(chessboard, data, finish) {
  while (data.queue.length > 0 && (data.visits.filter((i) => i.position === finish)).length < 2) {
    const { position, parent, currentPath } = data.queue.shift();
    const isVisit = data.visits.some(
      (i) => parent && i.parent === parent && i.position === position
    );
    const path = `${currentPath ? currentPath + "." : ""}${position}`;
    if (parent && parent !== position && !isVisit) {
      data.visits.push({
        parent,
        position: position,
        path,
      });
    }
    if (!isVisit) {
      const startNumber = position.split("")[1];
      const startLine = startNumber - 1;
      if (startLine < 0) return 0;
      const metaData = chessboard[startLine].find((i) => i.name === position);
      const steps = [
        // up
        {
          number: metaData.number + 2,
          index: metaData.index + 1,
        },
        {
          number: metaData.number + 2,
          index: metaData.index - 1,
        },
        {
          number: metaData.number + 1,
          index: metaData.index + 2,
        },
        {
          number: metaData.number + 1,
          index: metaData.index - 2,
        },
        // down
        {
          number: metaData.number - 2,
          index: metaData.index + 1,
        },
        {
          number: metaData.number - 2,
          index: metaData.index - 1,
        },
        {
          number: metaData.number - 1,
          index: metaData.index + 2,
        },
        {
          number: metaData.number - 1,
          index: metaData.index - 2,
        },
      ].reduce((step, i) => {
        if (i.number > 0 && i.number <= 8 && i.index >= 0 && i.index <= 7) {
          const data = chessboard[i.number - 1].find(
            (j) => j.index === i.index && j.number === i.number
          );
          step.push(data);
        }
        return step;
      }, []);
      const positions = steps.map((i) => {
        return {
          position: i.name,
          parent: position,
          currentPath: path,
        };
      });
      data.queue = data.queue.concat(positions);
    }
  }
}

// ------------------------------- Testing -------------------------------------------

function shuffle(a) {for (let i = a.length - 1; i > 0; i--) {const j = Math.floor(Math.random() * (i + 1)); [a[i], a[j]] = [a[j], a[i]];}return a;}

describe("Testing...", function(){
  let arr = [['a1', 'c1', 2], ['a1', 'f1', 3], ['a1', 'f3', 3], ['a1', 'f4', 4], ['a1', 'f7', 5], ['a1', 'g3', 4], ['a1', 'g4', 3], ['a1', 'g7', 4], ['a2', 'a1', 3], ['a2', 'a3', 3], ['a2', 'a5', 3], ['a2', 'a6', 2], ['a2', 'a7', 3], ['a2', 'b2', 3], ['a2', 'c1', 1], ['a2', 'd1', 2], ['a2', 'd2', 3], ['a2', 'd3', 2], ['a2', 'e5', 3], ['a2', 'f3', 4], ['a2', 'f4', 3], ['a2', 'f7', 4], ['a2', 'g1', 3], ['a2', 'g4', 4], ['a2', 'h1', 4], ['a2', 'h4', 5], ['a2', 'h5', 4], ['a2', 'h6', 5], ['a3', 'a8', 3], ['a3', 'c2', 1], ['a3', 'c3', 2], ['a3', 'c5', 4], ['a3', 'c7', 2], ['a3', 'c8', 3], ['a3', 'd1', 3], ['a3', 'd3', 3], ['a3', 'd5', 3], ['a3', 'd7', 3], ['a3', 'e2', 3], ['a3', 'e3', 2], ['a3', 'e5', 2], ['a3', 'e7', 4], ['a3', 'f2', 4], ['a3', 'f3', 3], ['a3', 'f5', 3], ['a3', 'g1', 4], ['a3', 'h6', 4], ['a3', 'h7', 5], ['a4', 'a1', 3], ['a4', 'a3', 3], ['a4', 'a5', 3], ['a4', 'a7', 3], ['a4', 'a8', 2], ['a4', 'b3', 2], ['a4', 'c8', 2], ['a4', 'd3', 2], ['a4', 'd6', 3], ['a4', 'e2', 2], ['a4', 'e5', 3], ['a4', 'e6', 2], ['a4', 'e7', 3], ['a4', 'f3', 4], ['a4', 'f4', 3], ['a4', 'g2', 4], ['a4', 'g6', 4], ['a4', 'g8', 4], ['a4', 'h1', 4], ['a5', 'a2', 3], ['a5', 'a6', 3], ['a5', 'a7', 2], ['a5', 'b1', 3], ['a5', 'b4', 2], ['a5', 'b7', 1], ['a5', 'c1', 2], ['a5', 'c2', 3], ['a5', 'd1', 3], ['a5', 'd8', 2], ['a5', 'e3', 2], ['a5', 'e6', 3], ['a5', 'e7', 2], ['a5', 'f2', 4], ['a5', 'f5', 3], ['a5', 'f8', 4], ['a5', 'g6', 3], ['a5', 'g7', 4], ['a5', 'h7', 5], ['a5', 'h8', 4], ['a6', 'a2', 2], ['a6', 'a7', 3], ['a6', 'b1', 4], ['a6', 'b3', 2], ['a6', 'b6', 3], ['a6', 'b7', 2], ['a6', 'c1', 3], ['a6', 'c3', 3], ['a6', 'd1', 4], ['a6', 'd6', 3], ['a6', 'e5', 3], ['a6', 'e8', 2], ['a6', 'f4', 3], ['a6', 'f8', 3], ['a6', 'g5', 3], ['a6', 'g6', 4], ['a6', 'h2', 5], ['a6', 'h5', 4], ['a6', 'h6', 5], ['a6', 'h8', 5], ['a7', 'a2', 3], ['a7', 'a3', 2], ['a7', 'a4', 3], ['a7', 'a5', 2], ['a7', 'a6', 3], ['a7', 'b4', 2], ['a7', 'b6', 2], ['a7', 'b7', 3], ['a7', 'c8', 1], ['a7', 'd7', 3], ['a7', 'd8', 2], ['a7', 'e5', 2], ['a7', 'f3', 3], ['a7', 'f5', 3], ['a7', 'f7', 3], ['a7', 'g3', 4], ['a7', 'g4', 3], ['a7', 'g5', 4], ['a7', 'g6', 3], ['a7', 'h1', 5], ['a7', 'h3', 5], ['a7', 'h6', 4], ['a8', 'a2', 4], ['a8', 'b2', 3], ['a8', 'c5', 3], ['a8', 'c6', 4], ['a8', 'd1', 4], ['a8', 'd8', 3], ['a8', 'e3', 3], ['a8', 'e4', 4], ['a8', 'f2', 5], ['a8', 'f4', 3], ['a8', 'f5', 4], ['a8', 'g1', 5], ['a8', 'h1', 6], ['a8', 'h3', 4], ['a8', 'h5', 4], ['a8', 'h6', 5], ['a8', 'h7', 4], ['a8', 'h8', 5], ['b1', 'b2', 3], ['b1', 'b3', 2], ['b1', 'b7', 4], ['b1', 'c3', 1], ['b1', 'd3', 4], ['b1', 'd4', 3], ['b1', 'e7', 3], ['b1', 'f5', 4], ['b1', 'f6', 3], ['b1', 'f7', 4], ['b1', 'g6', 4], ['b1', 'h2', 3], ['b1', 'h3', 4], ['b1', 'h4', 3], ['b1', 'h7', 4], ['b2', 'a2', 3], ['b2', 'a4', 1], ['b2', 'a7', 4], ['b2', 'a8', 3], ['b2', 'b1', 3], ['b2', 'b3', 3], ['b2', 'b6', 2], ['b2', 'c7', 4], ['b2', 'c8', 3], ['b2', 'd3', 1], ['b2', 'd5', 3], ['b2', 'e5', 2], ['b2', 'e7', 4], ['b2', 'f2', 2], ['b2', 'g5', 4], ['b2', 'h2', 4], ['b2', 'h4', 4], ['b3', 'a1', 1], ['b3', 'a2', 2], ['b3', 'a3', 3], ['b3', 'a5', 1], ['b3', 'a7', 3], ['b3', 'b8', 3], ['b3', 'c1', 1], ['b3', 'c5', 1], ['b3', 'c6', 2], ['b3', 'c8', 4], ['b3', 'd1', 4], ['b3', 'd7', 2], ['b3', 'd8', 3], ['b3', 'e6', 2], ['b3', 'e7', 3], ['b3', 'f2', 3], ['b3', 'f3', 2], ['b3', 'f7', 4], ['b3', 'g2', 4], ['b3', 'g6', 4], ['b3', 'g8', 4], ['b3', 'h8', 5], ['b4', 'b2', 2], ['b4', 'c6', 1], ['b4', 'd2', 4], ['b4', 'd3', 1], ['b4', 'e7', 2], ['b4', 'e8', 3], ['b4', 'f1', 3], ['b4', 'f5', 3], ['b4', 'f8', 4], ['b4', 'g1', 4], ['b4', 'g4', 3], ['b4', 'h1', 3], ['b4', 'h5', 3], ['b4', 'h7', 3], ['b5', 'a4', 2], ['b5', 'a6', 2], ['b5', 'b1', 2], ['b5', 'b3', 2], ['b5', 'c1', 3], ['b5', 'c2', 2], ['b5', 'c3', 1], ['b5', 'c6', 2], ['b5', 'c8', 2], ['b5', 'd4', 1], ['b5', 'd6', 1], ['b5', 'd8', 3], ['b5', 'e2', 2], ['b5', 'e5', 3], ['b5', 'e6', 2], ['b5', 'f1', 4], ['b5', 'f2', 3], ['b5', 'g2', 4], ['b5', 'g6', 4], ['b5', 'g7', 3], ['b5', 'h1', 4], ['b5', 'h3', 4], ['b5', 'h8', 3], ['b6', 'a1', 4], ['b6', 'a6', 3], ['b6', 'a7', 2], ['b6', 'a8', 1], ['b6', 'b2', 2], ['b6', 'b3', 3], ['b6', 'b7', 3], ['b6', 'c3', 2], ['b6', 'c4', 1], ['b6', 'c5', 2], ['b6', 'c6', 3], ['b6', 'c8', 1], ['b6', 'd4', 4], ['b6', 'd5', 1], ['b6', 'e6', 3], ['b6', 'e7', 2], ['b6', 'e8', 3], ['b6', 'f3', 3], ['b6', 'f5', 3], ['b6', 'g1', 4], ['b6', 'g3', 4], ['b6', 'g7', 4], ['b6', 'h5', 3], ['b7', 'a3', 3], ['b7', 'a8', 4], ['b7', 'b1', 4], ['b7', 'b8', 3], ['b7', 'c1', 3], ['b7', 'c4', 2], ['b7', 'c8', 2], ['b7', 'd3', 2], ['b7', 'd5', 4], ['b7', 'd8', 1], ['b7', 'f7', 2], ['b7', 'g2', 4], ['b7', 'g3', 3], ['b7', 'g5', 3], ['b7', 'h4', 3], ['b8', 'a2', 3], ['b8', 'b5', 3], ['b8', 'b6', 2], ['b8', 'b7', 3], ['b8', 'c2', 3], ['b8', 'c4', 3], ['b8', 'c8', 3], ['b8', 'e1', 4], ['b8', 'e3', 4], ['b8', 'e5', 2], ['b8', 'e7', 2], ['b8', 'f1', 5], ['b8', 'f5', 3], ['b8', 'f6', 2], ['b8', 'f7', 3], ['b8', 'f8', 2], ['b8', 'g2', 5], ['b8', 'g5', 4], ['b8', 'h2', 4], ['b8', 'h3', 5], ['b8', 'h4', 4], ['c1', 'a1', 2], ['c1', 'a4', 3], ['c1', 'a8', 5], ['c1', 'b6', 4], ['c1', 'c2', 3], ['c1', 'c6', 3], ['c1', 'c7', 4], ['c1', 'c8', 5], ['c1', 'd3', 1], ['c1', 'd4', 2], ['c1', 'd6', 4], ['c1', 'e1', 2], ['c1', 'f1', 3], ['c1', 'f4', 2], ['c1', 'g2', 3], ['c1', 'g5', 4], ['c1', 'g6', 3], ['c1', 'g8', 5], ['c1', 'h1', 3], ['c1', 'h3', 3], ['c1', 'h5', 3], ['c1', 'h7', 5], ['c2', 'a1', 1], ['c2', 'b2', 3], ['c2', 'b3', 2], ['c2', 'b7', 4], ['c2', 'c6', 2], ['c2', 'c7', 3], ['c2', 'd1', 2], ['c2', 'd3', 2], ['c2', 'd7', 4], ['c2', 'd8', 3], ['c2', 'e7', 3], ['c2', 'e8', 4], ['c2', 'f2', 3], ['c2', 'f3', 2], ['c2', 'f6', 3], ['c2', 'g2', 2], ['c2', 'g3', 3], ['c2', 'g7', 3], ['c2', 'h1', 4], ['c2', 'h2', 3], ['c2', 'h5', 4], ['c2', 'h7', 4], ['c2', 'h8', 5], ['c3', 'a1', 4], ['c3', 'a7', 2], ['c3', 'a8', 3], ['c3', 'b1', 1], ['c3', 'b2', 2], ['c3', 'b5', 1], ['c3', 'b8', 4], ['c3', 'c1', 2], ['c3', 'c4', 3], ['c3', 'c5', 2], ['c3', 'c7', 2], ['c3', 'c8', 3], ['c3', 'd4', 2], ['c3', 'd8', 4], ['c3', 'e2', 1], ['c3', 'e6', 3], ['c3', 'f6', 2], ['c3', 'f7', 3], ['c3', 'g2', 3], ['c3', 'g7', 4], ['c3', 'h3', 3], ['c3', 'h4', 4], ['c3', 'h6', 4], ['c4', 'a4', 2], ['c4', 'b1', 2], ['c4', 'b3', 2], ['c4', 'b6', 1], ['c4', 'c1', 3], ['c4', 'c2', 2], ['c4', 'c6', 2], ['c4', 'c7', 3], ['c4', 'd1', 2], ['c4', 'd2', 1], ['c4', 'd3', 2], ['c4', 'd6', 1], ['c4', 'd7', 2], ['c4', 'e3', 1], ['c4', 'e4', 2], ['c4', 'e5', 1], ['c4', 'e8', 2], ['c4', 'f2', 3], ['c4', 'f5', 2], ['c4', 'f6', 3], ['c4', 'f7', 2], ['c4', 'g2', 2], ['c4', 'g6', 2], ['c4', 'g8', 4], ['c4', 'h3', 4], ['c4', 'h6', 3], ['c4', 'h8', 3], ['c5', 'a3', 4], ['c5', 'a7', 4], ['c5', 'b4', 2], ['c5', 'b7', 1], ['c5', 'c1', 2], ['c5', 'c3', 2], ['c5', 'c6', 3], ['c5', 'd2', 2], ['c5', 'd3', 1], ['c5', 'd4', 2], ['c5', 'e1', 2], ['c5', 'e3', 4], ['c5', 'f2', 2], ['c5', 'f6', 2], ['c5', 'f7', 3], ['c5', 'g3', 2], ['c5', 'g6', 3], ['c5', 'h1', 3], ['c5', 'h6', 4], ['c5', 'h7', 3], ['c6', 'a2', 2], ['c6', 'a3', 3], ['c6', 'a6', 2], ['c6', 'b5', 2], ['c6', 'c1', 3], ['c6', 'c2', 2], ['c6', 'c3', 3], ['c6', 'c5', 3], ['c6', 'd1', 4], ['c6', 'd2', 3], ['c6', 'd4', 1], ['c6', 'f6', 3], ['c6', 'g4', 2], ['c6', 'g7', 3], ['c6', 'h1', 4], ['c6', 'h2', 3], ['c6', 'h7', 4], ['c7', 'a6', 1], ['c7', 'a7', 2], ['c7', 'a8', 1], ['c7', 'b3', 3], ['c7', 'b4', 2], ['c7', 'b5', 1], ['c7', 'b7', 3], ['c7', 'c4', 3], ['c7', 'd1', 3], ['c7', 'd4', 2], ['c7', 'd7', 3], ['c7', 'd8', 2], ['c7', 'e1', 4], ['c7', 'e2', 3], ['c7', 'e8', 1], ['c7', 'f2', 4], ['c7', 'f3', 3], ['c7', 'f7', 3], ['c7', 'f8', 2], ['c7', 'h2', 4], ['c7', 'h7', 3], ['c7', 'h8', 4], ['c8', 'a2', 4], ['c8', 'a6', 4], ['c8', 'a8', 2], ['c8', 'b1', 4], ['c8', 'b3', 4], ['c8', 'b5', 2], ['c8', 'b7', 2], ['c8', 'b8', 3], ['c8', 'c3', 3], ['c8', 'd1', 4], ['c8', 'd2', 3], ['c8', 'd4', 3], ['c8', 'd5', 2], ['c8', 'd6', 1], ['c8', 'e4', 2], ['c8', 'e5', 3], ['c8', 'e6', 4], ['c8', 'f1', 4], ['c8', 'f4', 3], ['c8', 'f6', 3], ['c8', 'g5', 3], ['c8', 'h2', 5], ['c8', 'h4', 3], ['d1', 'a2', 2], ['d1', 'a4', 2], ['d1', 'a7', 3], ['d1', 'b1', 2], ['d1', 'b4', 3], ['d1', 'b5', 2], ['d1', 'b7', 4], ['d1', 'c4', 2], ['d1', 'c6', 4], ['d1', 'c8', 4], ['d1', 'd2', 3], ['d1', 'd4', 3], ['d1', 'd6', 3], ['d1', 'e1', 3], ['d1', 'e3', 1], ['d1', 'f4', 3], ['d1', 'f8', 5], ['d1', 'g1', 3], ['d1', 'g7', 3], ['d1', 'h6', 3], ['d1', 'h8', 5], ['d2', 'a2', 3], ['d2', 'a4', 3], ['d2', 'a5', 2], ['d2', 'b2', 2], ['d2', 'b5', 3], ['d2', 'b7', 3], ['d2', 'c4', 1], ['d2', 'd1', 3], ['d2', 'd5', 3], ['d2', 'd8', 4], ['d2', 'e1', 2], ['d2', 'e7', 4], ['d2', 'f1', 1], ['d2', 'f3', 1], ['d2', 'f4', 4], ['d2', 'f7', 3], ['d2', 'g3', 2], ['d2', 'g4', 3], ['d2', 'h1', 3], ['d2', 'h2', 2], ['d2', 'h3', 3], ['d2', 'h4', 2], ['d3', 'a4', 2], ['d3', 'a7', 3], ['d3', 'b3', 2], ['d3', 'b4', 1], ['d3', 'b7', 2], ['d3', 'c2', 2], ['d3', 'c3', 3], ['d3', 'c6', 2], ['d3', 'c7', 3], ['d3', 'c8', 4], ['d3', 'd5', 2], ['d3', 'd6', 3], ['d3', 'd7', 2], ['d3', 'd8', 3], ['d3', 'e5', 1], ['d3', 'e6', 2], ['d3', 'f3', 2], ['d3', 'f4', 1], ['d3', 'f6', 3], ['d3', 'g3', 3], ['d3', 'g4', 2], ['d3', 'h1', 2], ['d3', 'h6', 3], ['d4', 'a2', 3], ['d4', 'a5', 2], ['d4', 'a6', 3], ['d4', 'b1', 3], ['d4', 'b3', 1], ['d4', 'b4', 2], ['d4', 'b5', 1], ['d4', 'b7', 3], ['d4', 'c1', 2], ['d4', 'c3', 2], ['d4', 'c4', 3], ['d4', 'c5', 2], ['d4', 'c8', 3], ['d4', 'd6', 2], ['d4', 'd7', 3], ['d4', 'e2', 1], ['d4', 'e6', 1], ['d4', 'f1', 3], ['d4', 'f3', 1], ['d4', 'f4', 2], ['d4', 'f5', 1], ['d4', 'f8', 2], ['d4', 'g4', 3], ['d4', 'g6', 3], ['d4', 'g8', 3], ['d4', 'h3', 3], ['d4', 'h8', 4], ['d5', 'a3', 3], ['d5', 'a4', 2], ['d5', 'a6', 2], ['d5', 'a7', 3], ['d5', 'b1', 2], ['d5', 'c3', 1], ['d5', 'c6', 2], ['d5', 'd1', 2], ['d5', 'd2', 3], ['d5', 'd4', 3], ['d5', 'e2', 2], ['d5', 'e7', 1], ['d5', 'e8', 2], ['d5', 'f2', 3], ['d5', 'f5', 2], ['d5', 'f6', 1], ['d5', 'g1', 3], ['d5', 'g8', 2], ['d5', 'h3', 2], ['d5', 'h6', 3], ['d6', 'a3', 2], ['d6', 'a5', 2], ['d6', 'a6', 3], ['d6', 'b1', 3], ['d6', 'b7', 1], ['d6', 'c2', 3], ['d6', 'c4', 1], ['d6', 'c6', 3], ['d6', 'd8', 2], ['d6', 'e2', 3], ['d6', 'e6', 3], ['d6', 'f3', 3], ['d6', 'g4', 3], ['d6', 'g6', 3], ['d6', 'h2', 4], ['d6', 'h3', 3], ['d6', 'h4', 2], ['d7', 'a4', 2], ['d7', 'a5', 3], ['d7', 'b4', 3], ['d7', 'b5', 4], ['d7', 'b6', 1], ['d7', 'b8', 1], ['d7', 'c2', 4], ['d7', 'c7', 3], ['d7', 'd1', 4], ['d7', 'd6', 3], ['d7', 'e3', 3], ['d7', 'e4', 2], ['d7', 'e5', 1], ['d7', 'e6', 2], ['d7', 'e7', 3], ['d7', 'f1', 4], ['d7', 'f3', 2], ['d7', 'g2', 4], ['d7', 'g3', 3], ['d7', 'g4', 2], ['d7', 'g5', 3], ['d7', 'g8', 2], ['d7', 'h1', 4], ['d7', 'h7', 2], ['d8', 'a1', 4], ['d8', 'a2', 3], ['d8', 'a3', 4], ['d8', 'a4', 3], ['d8', 'a5', 2], ['d8', 'a7', 2], ['d8', 'a8', 3], ['d8', 'b7', 1], ['d8', 'c2', 3], ['d8', 'c3', 4], ['d8', 'c6', 1], ['d8', 'd2', 4], ['d8', 'd7', 3], ['d8', 'e1', 4], ['d8', 'e4', 3], ['d8', 'f1', 5], ['d8', 'f3', 3], ['d8', 'f7', 1], ['d8', 'g7', 2], ['e1', 'a6', 3], ['e1', 'a8', 5], ['e1', 'b2', 2], ['e1', 'b4', 2], ['e1', 'b6', 4], ['e1', 'c4', 3], ['e1', 'c5', 2], ['e1', 'd1', 3], ['e1', 'd3', 1], ['e1', 'd5', 3], ['e1', 'e3', 2], ['e1', 'e4', 3], ['e1', 'e5', 2], ['e1', 'f2', 2], ['e1', 'f3', 1], ['e1', 'f4', 2], ['e1', 'f5', 3], ['e1', 'g2', 1], ['e1', 'g3', 4], ['e1', 'g4', 3], ['e1', 'g7', 4], ['e1', 'h2', 2], ['e1', 'h3', 3], ['e2', 'a7', 3], ['e2', 'a8', 4], ['e2', 'c1', 1], ['e2', 'c3', 1], ['e2', 'c5', 3], ['e2', 'c7', 3], ['e2', 'c8', 4], ['e2', 'd1', 2], ['e2', 'd2', 3], ['e2', 'd3', 2], ['e2', 'd4', 1], ['e2', 'e1', 3], ['e2', 'f3', 2], ['e2', 'f6', 3], ['e2', 'g1', 1], ['e2', 'g2', 2], ['e2', 'g6', 2], ['e2', 'g8', 4], ['e2', 'h1', 2], ['e2', 'h6', 3], ['e2', 'h8', 3], ['e3', 'a2', 3], ['e3', 'a3', 2], ['e3', 'a5', 2], ['e3', 'a8', 3], ['e3', 'b1', 3], ['e3', 'b7', 3], ['e3', 'c1', 4], ['e3', 'c3', 2], ['e3', 'd2', 2], ['e3', 'd5', 1], ['e3', 'e4', 3], ['e3', 'e6', 3], ['e3', 'e7', 2], ['e3', 'f1', 1], ['e3', 'f4', 2], ['e3', 'f5', 1], ['e3', 'f7', 3], ['e3', 'f8', 4], ['e3', 'g2', 1], ['e3', 'g3', 2], ['e3', 'g4', 1], ['e3', 'g7', 2], ['e3', 'g8', 3], ['e3', 'h3', 3], ['e3', 'h4', 2], ['e3', 'h7', 3], ['e4', 'a7', 3], ['e4', 'a8', 4], ['e4', 'b3', 2], ['e4', 'b4', 3], ['e4', 'b7', 2], ['e4', 'c4', 2], ['e4', 'c6', 4], ['e4', 'd1', 2], ['e4', 'd5', 2], ['e4', 'd6', 1], ['e4', 'e1', 3], ['e4', 'e5', 3], ['e4', 'f2', 1], ['e4', 'f4', 3], ['e4', 'f5', 2], ['e4', 'g4', 2], ['e4', 'h1', 2], ['e4', 'h3', 2], ['e4', 'h4', 3], ['e4', 'h7', 2], ['e4', 'h8', 3], ['e5', 'a5', 2], ['e5', 'b2', 2], ['e5', 'b4', 2], ['e5', 'b6', 2], ['e5', 'b8', 2], ['e5', 'c5', 2], ['e5', 'c7', 4], ['e5', 'c8', 3], ['e5', 'd2', 2], ['e5', 'd4', 2], ['e5', 'e1', 2], ['e5', 'e2', 3], ['e5', 'e4', 3], ['e5', 'e7', 2], ['e5', 'f4', 2], ['e5', 'f6', 2], ['e5', 'g1', 2], ['e5', 'g2', 3], ['e5', 'g3', 4], ['e5', 'g4', 1], ['e5', 'g7', 4], ['e5', 'h1', 3], ['e5', 'h7', 3], ['e6', 'a4', 2], ['e6', 'b2', 3], ['e6', 'b4', 3], ['e6', 'b5', 2], ['e6', 'b8', 3], ['e6', 'c5', 1], ['e6', 'c8', 4], ['e6', 'd6', 3], ['e6', 'd7', 2], ['e6', 'e5', 3], ['e6', 'e8', 2], ['e6', 'f5', 2], ['e6', 'f6', 3], ['e6', 'f7', 2], ['e6', 'g4', 4], ['e6', 'g8', 4], ['e6', 'h3', 2], ['e6', 'h8', 3], ['e7', 'a5', 2], ['e7', 'a7', 2], ['e7', 'b1', 3], ['e7', 'b7', 3], ['e7', 'c2', 3], ['e7', 'c3', 2], ['e7', 'c8', 1], ['e7', 'd2', 4], ['e7', 'd3', 3], ['e7', 'd4', 2], ['e7', 'd8', 2], ['e7', 'e3', 2], ['e7', 'f2', 4], ['e7', 'f7', 3], ['e7', 'g1', 4], ['e7', 'g2', 3], ['e7', 'g5', 4], ['e7', 'g6', 1], ['e7', 'h2', 4], ['e7', 'h3', 3], ['e7', 'h5', 3], ['e7', 'h8', 2], ['e8', 'c2', 4], ['e8', 'c6', 4], ['e8', 'c7', 1], ['e8', 'c8', 2], ['e8', 'd3', 4], ['e8', 'd5', 2], ['e8', 'd6', 1], ['e8', 'd7', 2], ['e8', 'd8', 3], ['e8', 'e1', 5], ['e8', 'e7', 3], ['e8', 'f1', 4], ['e8', 'f3', 4], ['e8', 'f5', 2], ['e8', 'f6', 1], ['e8', 'g3', 3], ['e8', 'g4', 2], ['e8', 'h2', 3], ['e8', 'h7', 2], ['f1', 'a4', 4], ['f1', 'b2', 3], ['f1', 'b3', 2], ['f1', 'b6', 3], ['f1', 'c4', 2], ['f1', 'c8', 4], ['f1', 'd4', 3], ['f1', 'd7', 4], ['f1', 'e1', 3], ['f1', 'e4', 2], ['f1', 'e7', 3], ['f1', 'g5', 3], ['f1', 'g6', 4], ['f1', 'h1', 2], ['f1', 'h2', 1], ['f1', 'h3', 4], ['f1', 'h8', 5], ['f2', 'a8', 5], ['f2', 'b2', 2], ['f2', 'b5', 3], ['f2', 'b6', 4], ['f2', 'b7', 3], ['f2', 'b8', 4], ['f2', 'c2', 3], ['f2', 'c3', 2], ['f2', 'c7', 4], ['f2', 'd4', 4], ['f2', 'e1', 2], ['f2', 'e4', 1], ['f2', 'e5', 2], ['f2', 'e6', 3], ['f2', 'e8', 3], ['f2', 'f1', 3], ['f2', 'f3', 3], ['f2', 'f4', 2], ['f2', 'f5', 3], ['f2', 'g3', 2], ['f2', 'h1', 1], ['f2', 'h2', 2], ['f2', 'h3', 1], ['f2', 'h6', 2], ['f3', 'a2', 4], ['f3', 'a3', 3], ['f3', 'a6', 4], ['f3', 'a7', 3], ['f3', 'b2', 3], ['f3', 'b4', 3], ['f3', 'b7', 4], ['f3', 'b8', 3], ['f3', 'c2', 2], ['f3', 'c6', 2], ['f3', 'd1', 4], ['f3', 'd4', 1], ['f3', 'e6', 2], ['f3', 'f4', 3], ['f3', 'f8', 3], ['f3', 'g1', 1], ['f3', 'g3', 3], ['f3', 'g4', 2], ['f3', 'g5', 1], ['f3', 'g7', 3], ['f3', 'h2', 1], ['f3', 'h8', 3], ['f4', 'a5', 4], ['f4', 'a6', 3], ['f4', 'b4', 2], ['f4', 'b5', 3], ['f4', 'b6', 2], ['f4', 'c1', 2], ['f4', 'd3', 1], ['f4', 'e1', 2], ['f4', 'e7', 2], ['f4', 'e8', 3], ['f4', 'f5', 3], ['f4', 'f8', 2], ['f4', 'g2', 1], ['f4', 'h2', 4], ['f4', 'h4', 2], ['f5', 'a1', 3], ['f5', 'a3', 3], ['f5', 'a5', 3], ['f5', 'b3', 2], ['f5', 'c6', 2], ['f5', 'c7', 3], ['f5', 'c8', 2], ['f5', 'd1', 2], ['f5', 'd6', 1], ['f5', 'd8', 3], ['f5', 'e1', 3], ['f5', 'e5', 3], ['f5', 'e6', 2], ['f5', 'f1', 2], ['f5', 'f2', 3], ['f5', 'f3', 2], ['f5', 'f4', 3], ['f5', 'g1', 3], ['f5', 'g2', 2], ['f5', 'g5', 3], ['f5', 'h2', 3], ['f5', 'h4', 1], ['f5', 'h5', 2], ['f6', 'a5', 4], ['f6', 'a7', 4], ['f6', 'a8', 3], ['f6', 'b2', 4], ['f6', 'b4', 2], ['f6', 'b7', 3], ['f6', 'b8', 2], ['f6', 'c1', 4], ['f6', 'c3', 2], ['f6', 'c5', 2], ['f6', 'c8', 3], ['f6', 'd1', 3], ['f6', 'd3', 3], ['f6', 'd7', 1], ['f6', 'e4', 1], ['f6', 'f4', 2], ['f6', 'g3', 2], ['f6', 'g7', 2], ['f7', 'a1', 5], ['f7', 'a2', 4], ['f7', 'a4', 4], ['f7', 'a7', 3], ['f7', 'b1', 4], ['f7', 'b5', 2], ['f7', 'b7', 2], ['f7', 'b8', 3], ['f7', 'c3', 3], ['f7', 'c7', 3], ['f7', 'd3', 2], ['f7', 'd8', 1], ['f7', 'e2', 4], ['f7', 'f4', 3], ['f7', 'f8', 3], ['f7', 'g4', 2], ['f7', 'g6', 2], ['f7', 'g7', 3], ['f7', 'h2', 3], ['f7', 'h3', 2], ['f7', 'h4', 3], ['f7', 'h5', 4], ['f8', 'a1', 4], ['f8', 'a2', 5], ['f8', 'a4', 3], ['f8', 'a5', 4], ['f8', 'a6', 3], ['f8', 'b1', 5], ['f8', 'b3', 3], ['f8', 'b5', 3], ['f8', 'c2', 3], ['f8', 'c4', 3], ['f8', 'c5', 2], ['f8', 'd1', 5], ['f8', 'd2', 4], ['f8', 'd5', 3], ['f8', 'd8', 2], ['f8', 'e3', 4], ['f8', 'f2', 4], ['f8', 'f6', 2], ['f8', 'f7', 3], ['f8', 'g7', 2], ['f8', 'h2', 4], ['f8', 'h6', 4], ['g1', 'a1', 4], ['g1', 'a4', 3], ['g1', 'a5', 4], ['g1', 'b6', 4], ['g1', 'c3', 2], ['g1', 'c5', 4], ['g1', 'c6', 3], ['g1', 'd2', 2], ['g1', 'd5', 3], ['g1', 'd7', 3], ['g1', 'e4', 3], ['g1', 'e7', 4], ['g1', 'f1', 3], ['g1', 'g4', 3], ['g1', 'g6', 3], ['g1', 'h1', 3], ['g1', 'h7', 3], ['g2', 'a1', 3], ['g2', 'a2', 4], ['g2', 'a4', 4], ['g2', 'b1', 4], ['g2', 'b4', 3], ['g2', 'b5', 4], ['g2', 'b8', 5], ['g2', 'c1', 3], ['g2', 'c3', 3], ['g2', 'c4', 2], ['g2', 'd1', 2], ['g2', 'd4', 3], ['g2', 'd5', 2], ['g2', 'd6', 3], ['g2', 'd7', 4], ['g2', 'e1', 1], ['g2', 'e2', 2], ['g2', 'e4', 4], ['g2', 'e5', 3], ['g2', 'e6', 2], ['g2', 'e7', 3], ['g2', 'f1', 2], ['g2', 'f2', 3], ['g2', 'f6', 3], ['g2', 'f7', 4], ['g2', 'g3', 3], ['g2', 'g8', 4], ['g2', 'h1', 4], ['g2', 'h3', 2], ['g2', 'h4', 1], ['g2', 'h6', 3], ['g3', 'a5', 4], ['g3', 'a7', 4], ['g3', 'b1', 3], ['g3', 'b6', 4], ['g3', 'c1', 2], ['g3', 'c7', 4], ['g3', 'c8', 3], ['g3', 'd3', 3], ['g3', 'd7', 3], ['g3', 'd8', 4], ['g3', 'e2', 1], ['g3', 'e3', 2], ['g3', 'e6', 3], ['g3', 'f1', 1], ['g3', 'f2', 2], ['g3', 'f5', 1], ['g3', 'g1', 2], ['g3', 'g5', 2], ['g3', 'g8', 3], ['g4', 'a2', 4], ['g4', 'a3', 3], ['g4', 'a6', 4], ['g4', 'a7', 3], ['g4', 'b3', 4], ['g4', 'c1', 3], ['g4', 'c2', 2], ['g4', 'c5', 3], ['g4', 'c6', 2], ['g4', 'c8', 4], ['g4', 'd7', 2], ['g4', 'd8', 3], ['g4', 'e2', 4], ['g4', 'e4', 2], ['g4', 'e5', 1], ['g4', 'f5', 2], ['g4', 'f7', 2], ['g4', 'g2', 2], ['g4', 'h1', 2], ['g4', 'h2', 1], ['g4', 'h4', 3], ['g5', 'a1', 4], ['g5', 'a5', 4], ['g5', 'b8', 4], ['g5', 'c5', 2], ['g5', 'c6', 3], ['g5', 'd4', 2], ['g5', 'e3', 4], ['g5', 'e5', 2], ['g5', 'e7', 4], ['g5', 'e8', 3], ['g5', 'f2', 2], ['g5', 'f6', 2], ['g5', 'f8', 2], ['g5', 'g2', 3], ['g5', 'g6', 3], ['g5', 'g7', 2], ['g5', 'h4', 2], ['g5', 'h5', 3], ['g5', 'h7', 1], ['g6', 'a1', 5], ['g6', 'a2', 4], ['g6', 'b2', 3], ['g6', 'b4', 3], ['g6', 'b7', 4], ['g6', 'b8', 3], ['g6', 'c3', 3], ['g6', 'c4', 2], ['g6', 'c6', 2], ['g6', 'c8', 2], ['g6', 'd1', 4], ['g6', 'd4', 3], ['g6', 'd8', 3], ['g6', 'e2', 2], ['g6', 'f2', 3], ['g6', 'f4', 1], ['g6', 'f6', 3], ['g6', 'f7', 2], ['g6', 'g7', 3], ['g6', 'h1', 4], ['g6', 'h2', 3], ['g6', 'h3', 2], ['g6', 'h5', 2], ['g6', 'h6', 3], ['g7', 'a4', 3], ['g7', 'a5', 4], ['g7', 'a6', 3], ['g7', 'b4', 4], ['g7', 'b8', 4], ['g7', 'c1', 4], ['g7', 'c2', 3], ['g7', 'c4', 3], ['g7', 'c5', 2], ['g7', 'c6', 3], ['g7', 'd2', 4], ['g7', 'e1', 4], ['g7', 'e6', 1], ['g7', 'f3', 3], ['g7', 'f6', 2], ['g7', 'f8', 2], ['g7', 'g2', 3], ['g7', 'g3', 2], ['g7', 'g4', 3], ['g7', 'h4', 2], ['g8', 'b1', 4], ['g8', 'b5', 4], ['g8', 'd3', 4], ['g8', 'd4', 3], ['g8', 'd6', 3], ['g8', 'd7', 2], ['g8', 'e1', 5], ['g8', 'e2', 4], ['g8', 'e3', 3], ['g8', 'f3', 4], ['g8', 'f4', 3], ['g8', 'f5', 2], ['g8', 'f6', 1], ['g8', 'g1', 5], ['g8', 'g2', 4], ['g8', 'h3', 4], ['g8', 'h4', 3], ['h1', 'a3', 5], ['h1', 'a5', 5], ['h1', 'a6', 4], ['h1', 'a7', 5], ['h1', 'b1', 4], ['h1', 'b3', 4], ['h1', 'b7', 4], ['h1', 'c3', 3], ['h1', 'c5', 3], ['h1', 'c7', 5], ['h1', 'c8', 4], ['h1', 'd1', 2], ['h1', 'd3', 2], ['h1', 'd6', 3], ['h1', 'e3', 3], ['h1', 'e7', 3], ['h1', 'f2', 1], ['h1', 'f7', 4], ['h1', 'f8', 5], ['h1', 'h2', 3], ['h1', 'h3', 2], ['h1', 'h7', 4], ['h2', 'a3', 4], ['h2', 'a5', 4], ['h2', 'b3', 3], ['h2', 'b5', 3], ['h2', 'b7', 5], ['h2', 'b8', 4], ['h2', 'c1', 4], ['h2', 'c2', 3], ['h2', 'c6', 3], ['h2', 'c7', 4], ['h2', 'd7', 3], ['h2', 'e2', 3], ['h2', 'e3', 2], ['h2', 'e4', 3], ['h2', 'e6', 3], ['h2', 'e8', 3], ['h2', 'f2', 2], ['h2', 'f3', 1], ['h2', 'f5', 3], ['h2', 'f6', 2], ['h2', 'g1', 2], ['h2', 'g6', 3], ['h2', 'g7', 4], ['h2', 'h7', 3], ['h2', 'h8', 4], ['h3', 'a1', 5], ['h3', 'a4', 4], ['h3', 'a8', 4], ['h3', 'b2', 3], ['h3', 'b5', 4], ['h3', 'b7', 4], ['h3', 'b8', 5], ['h3', 'c5', 3], ['h3', 'c6', 4], ['h3', 'd2', 3], ['h3', 'd4', 3], ['h3', 'd7', 4], ['h3', 'd8', 3], ['h3', 'e3', 3], ['h3', 'f5', 4], ['h3', 'f6', 3], ['h3', 'g1', 1], ['h3', 'g2', 2], ['h3', 'g4', 2], ['h3', 'g5', 1], ['h3', 'h2', 3], ['h3', 'h5', 2], ['h3', 'h7', 2], ['h4', 'a6', 5], ['h4', 'b4', 4], ['h4', 'c1', 4], ['h4', 'd2', 2], ['h4', 'd3', 3], ['h4', 'd4', 2], ['h4', 'd6', 2], ['h4', 'e1', 2], ['h4', 'e5', 2], ['h4', 'e7', 2], ['h4', 'f5', 1], ['h4', 'f7', 3], ['h4', 'f8', 2], ['h4', 'g2', 1], ['h4', 'g4', 3], ['h4', 'g6', 1], ['h4', 'g7', 2], ['h4', 'h2', 2], ['h4', 'h8', 2], ['h5', 'a1', 5], ['h5', 'a5', 5], ['h5', 'a8', 4], ['h5', 'b2', 3], ['h5', 'b3', 4], ['h5', 'b4', 3], ['h5', 'b7', 4], ['h5', 'd5', 2], ['h5', 'd8', 3], ['h5', 'e1', 3], ['h5', 'f6', 1], ['h5', 'f7', 4], ['h5', 'f8', 3], ['h5', 'g2', 2], ['h5', 'g4', 2], ['h5', 'g7', 1], ['h5', 'g8', 2], ['h5', 'h3', 2], ['h5', 'h6', 3], ['h5', 'h7', 2], ['h6', 'a1', 4], ['h6', 'a6', 5], ['h6', 'a7', 4], ['h6', 'a8', 5], ['h6', 'b3', 3], ['h6', 'b7', 3], ['h6', 'b8', 4], ['h6', 'd1', 3], ['h6', 'd2', 4], ['h6', 'd4', 2], ['h6', 'd5', 3], ['h6', 'd7', 3], ['h6', 'e6', 3], ['h6', 'e7', 2], ['h6', 'f3', 3], ['h6', 'f7', 1], ['h6', 'f8', 4], ['h6', 'g1', 4], ['h6', 'g3', 2], ['h6', 'g4', 1], ['h6', 'h1', 3], ['h6', 'h3', 3], ['h6', 'h5', 3], ['h6', 'h7', 3], ['h6', 'h8', 2], ['h7', 'a4', 4], ['h7', 'b3', 4], ['h7', 'b4', 3], ['h7', 'b5', 4], ['h7', 'b7', 4], ['h7', 'b8', 3], ['h7', 'c1', 5], ['h7', 'c2', 4], ['h7', 'c5', 3], ['h7', 'c7', 3], ['h7', 'd2', 3], ['h7', 'd8', 3], ['h7', 'f4', 3], ['h7', 'f5', 4], ['h7', 'f6', 1], ['h7', 'f7', 2], ['h7', 'f8', 1], ['h7', 'g1', 3], ['h7', 'g3', 3], ['h7', 'g5', 1], ['h7', 'g6', 2], ['h7', 'g7', 3], ['h7', 'h4', 3], ['h7', 'h5', 2], ['h8', 'a1', 6], ['h8', 'a5', 4], ['h8', 'a6', 5], ['h8', 'b2', 4], ['h8', 'b5', 3], ['h8', 'c3', 4], ['h8', 'c5', 4], ['h8', 'd1', 5], ['h8', 'd2', 4], ['h8', 'd4', 4], ['h8', 'd6', 2], ['h8', 'd8', 2], ['h8', 'e1', 4], ['h8', 'e3', 4], ['h8', 'e7', 2], ['h8', 'e8', 3], ['h8', 'f1', 5], ['h8', 'f2', 4], ['h8', 'f4', 2], ['h8', 'f7', 1], ['h8', 'g1', 4], ['h8', 'g3', 4], ['h8', 'g6', 1], ['h8', 'h2', 4], ['h8', 'h3', 3]];
  shuffle(arr);
  for (let i of arr) Test.assertEquals(knight(i[0], i[1]), i[2])
});

// ---------------------------------------------Other Solution-------------------------------------------

// 1

Object.defineProperty( Set.prototype, "reduce", { value: function reduce(fn,z) { for ( const v of this ) z = fn(z,v); return z; } } );
function knight(start,finish) {
  const fromXY = (x,y) => " abcdefgh"[x] + String(y) ;
  const toXY = ([x,y]) => [ " abcdefgh".indexOf(x), Number(y) ] ;
  const onBoard = ([x,y]) => x>=1 && x<=8 && y>=1 && y<=8 ;
  const moves = (x,y) => [ [x+1,y-2], [x+1,y+2], [x+2,y-1], [x+2,y+1], [x-1,y-2], [x-1,y+2], [x-2,y-1], [x-2,y+1] ].filter(onBoard) ;
  const allMoves = positions => positions.reduce( (set,pos) => moves(...toXY(pos)).reduce( (set,[x,y]) => set.add(fromXY(x,y)) , set ) , new Set ) ;
  return function move(positions,m) { return positions.has(finish) ? m : move( allMoves(positions), m+1 ) ; } ( new Set([start]), 0 ) ;
}

// 2

function knight(start, finish) {
  let map = [0,3,2,3,2,3,4,5, //based on google image search "knight move distance from corner"
      3,2,1,2,3,4,3,4,
      2,1,4,3,2,3,4,5,
      3,2,3,2,3,4,3,4,
      2,3,2,3,4,3,4,5,
      3,4,3,4,3,4,5,4,
      4,3,4,3,4,5,4,5,
      5,4,5,4,5,4,5,6];
  let diff = Math.abs(finish.charCodeAt(0) - start.charCodeAt(0)) * 8 + Math.abs(finish.charCodeAt(1) - start.charCodeAt(1));

  if(diff === 9 && (parseInt(start[1]) === 1 || parseInt(start[1]) === 8)&&
      (start[0] === 'a' || start[0] === 'h')) return 4; // corner case 1
  if(diff === 9 && (parseInt(finish[1]) === 1 || parseInt(finish[1]) === 8) &&
      (finish[0] === 'a' || finish[0] === 'h')) return 4; // corner case 2

  return map[diff];
}